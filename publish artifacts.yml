directories:
  - AC_OUTPUT_DIR
  - AC_SOURCE
steps:
  - componentType: appcircle_activate_ssh_key
    componentVersion: 1.0.*
    stepName: Activate SSH Private Key
    enabled: true
    onError: $exit
    webUrl: 'https://github.com/appcircleio/appcircle-activate-ssh-key-component'
    repoUrl: 'https://github.com/appcircleio/appcircle-activate-ssh-key-component.git'
    commit: 6f58522
    inputs:
      - AC_REPOSITORY_SSH_KEY: $AC_REPOSITORY_SSH_KEY
    outputs:
      - SSH_AUTH_SOCK: SSH_AUTH_SOCK
    alwaysRun: false
  - componentType: appcircle_git_clone
    componentVersion: 1.0.*
    stepName: Git Clone
    enabled: true
    onError: $exit
    webUrl: 'https://github.com/appcircleio/appcircle-git-clone-component'
    repoUrl: 'https://github.com/appcircleio/appcircle-git-clone-component.git'
    commit: aa07fc1
    inputs:
      - AC_GIT_URL: $AC_GIT_URL
      - AC_GIT_COMMIT: $AC_GIT_COMMIT
      - AC_GIT_BRANCH: $AC_GIT_BRANCH
      - AC_GIT_TAG: ''
      - AC_GIT_LFS: 'false'
      - AC_GIT_SUBMODULE: ''
      - AC_GIT_CACHE_CREDENTIALS: 'true'
      - AC_GIT_EXTRA_PARAMS: $AC_GIT_EXTRA_PARAMS
    outputs:
      - AC_REPOSITORY_DIR: AC_REPOSITORY_DIR
    alwaysRun: false
  - componentType: appcircle_custom_script
    componentVersion: 1.0.*
    stepName: Custom Script
    enabled: true
    onError: $exit
    webUrl: 'https://github.com/appcircleio/appcircle-custom-script-component'
    repoUrl: 'https://github.com/appcircleio/appcircle-custom-script-component.git'
    commit: ed1b419
    inputs:
      - Execute: bash
      - Script: >-
          AC_OUTPUT_DIR="AC_OUTPUT_DIR"



          ls -lsa _appcircle_temp/Repository


          if [ ! -d "$AC_OUTPUT_DIR" ]; then
              mkdir -p "$AC_OUTPUT_DIR"
              echo "created dir"
          fi


          cp _appcircle_temp/Repository/app-debug.apk "$AC_OUTPUT_DIR"/

          cp _appcircle_temp/Repository/release-notes.txt "$AC_OUTPUT_DIR"/

          cp _appcircle_temp/Repository/ac_post_process_output.json
          "$AC_OUTPUT_DIR"/
    alwaysRun: false
    outputs: []
  - componentType: appcircle_export_build_artifacts
    componentVersion: 1.0.*
    stepName: Export Build Artifacts
    alwaysRun: true
    enabled: true
    onError: $exit
    webUrl: 'https://github.com/appcircleio/appcircle-export-build-artifacts'
    repoUrl: 'https://github.com/appcircleio/appcircle-export-build-artifacts.git'
    commit: f8aa050
    inputs:
      - AC_UPLOAD_DIR: $AC_OUTPUT_DIR
